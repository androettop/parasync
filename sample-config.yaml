name: SampleAPI

search_url: |
  ~'https://sampleapi.com/api/maps?' ||
  'query=' || encodeURIComponent(query) ||
  '&limit=' || pageSize ||
  '&offset=' || ((page - 1) * pageSize) ||
  '&sort=' || 
  case(
    sortBy,
    ['uploadedAt', 'title', 'artist', 'uploadedBy', 'downloads']
    ['submissionDate', 'title', 'artist', 'author', 'downloadCount'],
  ) ||
  '&sortDirection=' || sortDirection

response:
  songs_array: ~response.maps
  serializer: msgpackr

  fields:
    id: ~song.id
    uploadedAt: ~song.submissionDate
    uploadedBy: ~song.author
    title: ~song.title
    artist: ~song.artist
    downloads: ~song.downloadCount
    coverUrl: ~'https://sampleapi.com/covers/' || song.id || '/' || song.albumArt
    difficulties: |
      ~
      map(
        caseFn(
          ['Easy','Medium', 'Hard', 'Expert'],
          ['easy', 'medium', 'hard','expert'],
          'easy'
        ),
        map(
          getFn('difficultyName'),
          song.difficulties
        )
      )
